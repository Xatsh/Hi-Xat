---
import type { Categories } from "@/types"

import { Image } from "astro:assets"

import Avatar from "@/assets/image/avatar.webp"
import ThemeToggle from "@/components/ui/theme-toggle.astro"

interface Props {
	title?: string
}

const { title } = Astro.props
---
	<header class="xat-header sticky top-0 z-100 backdrop-blur" transition:name="header">
		<nav class="flex items-center justify-between">
			<a href="/">
				<Image
					alt="Avatar"
					class="size-10 rounded-full"
					loading="eager"
					src={Avatar}
				/>
			</a>
			<button aria-label="Scroll to Top" class="grow py-2 font-bold opacity-0 transition-opacity transition-duration-500 transition-delay-300 -z-50" id="header-title">
				<span>
					{title ?? "Hi, Xat!"}
				</span>
			</button>
			<ThemeToggle id="theme-toggle" />
		</nav>
	</header>

<style>
  .xat-header {
    @apply 'xat-container py-3 my-3';
  }
</style>

<script is:inline>
  // Header Title Scroll to Top
  document.getElementById('header-title').addEventListener('click', () => {
    window.scrollTo({ top: 0, behavior: 'smooth' })
  })
  document.addEventListener('astro:after-swap', () => {
    document.getElementById('header-title').addEventListener('click', () => {
      window.scrollTo({ top: 0, behavior: 'smooth' })
    })
  })
</script>
